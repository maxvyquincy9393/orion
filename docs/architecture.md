# Architecture — Orion

> System architecture overview for the Orion Persistent AI Companion System.
> Update this document whenever the architecture changes.

---

## High-Level Architecture

```
┌─────────────────────────────────────────────────────────┐
│                     User Interface                       │
│          Telegram │ WhatsApp │ Discord │ Voice           │
└─────────────────┬───────────────────────┬───────────────┘
                  │                       │
                  ▼                       ▼
┌─────────────────────────┐  ┌───────────────────────────┐
│     Delivery Layer       │  │      Voice Pipeline       │
│    delivery/messenger.py │  │     delivery/voice.py     │
└──────────┬──────────────┘  └──────────┬────────────────┘
           │                            │
           ▼                            ▼
┌────────────────────────────────────────────────────────┐
│                     Core Layer                          │
│  ┌──────────────┐ ┌──────────┐ ┌────────────────────┐  │
│  │ Orchestrator  │ │ Memory   │ │ Context Builder    │  │
│  │ core/orch.py  │ │ core/mem │ │ core/context.py    │  │
│  └──────┬───────┘ └────┬─────┘ └──────┬─────────────┘  │
│         │              │              │                  │
│         ▼              ▼              ▼                  │
│  ┌──────────────────────────────────────────────────┐   │
│  │                RAG Pipeline                       │   │
│  │               core/rag.py                         │   │
│  └──────────────────────────────────────────────────┘   │
└────────────────────────┬───────────────────────────────┘
                         │
                         ▼
┌────────────────────────────────────────────────────────┐
│                   Engine Layer                           │
│  ┌─────────┐ ┌────────┐ ┌────────┐ ┌──────────────┐   │
│  │ OpenAI  │ │ Claude │ │ Gemini │ │ Local/Ollama │   │
│  └─────────┘ └────────┘ └────────┘ └──────────────┘   │
└────────────────────────────────────────────────────────┘
                         │
                         ▼
┌────────────────────────────────────────────────────────┐
│                  Data Layer                              │
│  ┌──────────────────┐  ┌────────────────────────────┐  │
│  │ PostgreSQL       │  │ Vector DB                   │  │
│  │ (SQLAlchemy)     │  │ (Pinecone / Supabase)       │  │
│  └──────────────────┘  └────────────────────────────┘  │
└────────────────────────────────────────────────────────┘
                         │
                         ▼
┌────────────────────────────────────────────────────────┐
│               Background Layer                          │
│  ┌─────────────┐ ┌──────────┐ ┌───────────────────┐   │
│  │ Daemon      │ │ Triggers │ │ Thread Manager    │   │
│  └─────────────┘ └──────────┘ └───────────────────┘   │
└────────────────────────────────────────────────────────┘
```

---

*Update this document as architecture evolves.*
