generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Message {
  id        String   @id @default(cuid())
  userId    String
  role      String
  content   String
  channel   String?
  metadata  Json?
  createdAt DateTime @default(now())

  @@index([userId, createdAt])
}

model Thread {
  id        String   @id @default(cuid())
  userId    String
  state     String
  context   Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([userId, state])
}

model TriggerLog {
  id          String   @id @default(cuid())
  userId      String
  triggerName String
  actedOn     Boolean  @default(false)
  firedAt     DateTime @default(now())

  @@index([userId, firedAt])
}

model VoiceProfile {
  id             String   @id @default(cuid())
  userId         String
  profileName    String
  cloneType      String
  modelPath      String?
  referenceAudio String?
  createdAt      DateTime @default(now())

  @@index([userId, profileName])
}

model Document {
  id        String   @id @default(cuid())
  userId    String
  title     String
  source    String
  createdAt DateTime @default(now())

  @@index([userId, createdAt])
}
